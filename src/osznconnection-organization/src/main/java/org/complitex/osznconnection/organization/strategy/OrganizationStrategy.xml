<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.complitex.osznconnection.organization.strategy.OrganizationStrategy">

    <select id="getChildrenCodes" parameterType="long" resultType="string">
        SELECT osc.`value` FROM `organization_string_culture` osc WHERE osc.`id` IN (SELECT oa.`value_id` FROM `organization_attribute` oa
        WHERE oa.`object_id` IN (SELECT o.`id` FROM `organization` o WHERE
        o.`parent_id` = #{parentId} AND o.`status` = 'ACTIVE')
        AND oa.`status` = 'ACTIVE' AND oa.`attribute_type_id` = 902)
        AND osc.`locale` = (SELECT l.`locale` FROM `locales` l WHERE l.`system` = 1)
    </select>

   

</mapper>